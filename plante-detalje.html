<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex">
    <link rel="stylesheet" href="style.css">
    <title>Planter</title>

</head>
<body>

    <header>

        <div class="hjem">
            
            <a href="index.html">
                <img src="" alt="" class="logo">
            </a>

        </div>

        <button class="toggle-btn">☰</button>

        <nav>
            <ul>
    
                <li>
                    
                    <a href="info.html">Info</a>
                
                </li>
    
                <li>
                    <a href="planter.html">Planter</a> 
                </li>
    
                <li>
                    <a href="om.html">Om os</a>
                </li>
    
            </ul>
        </nav>


    </header>

    <main>

        <button class="tilbage">←</button>

        <article class="plante">
            <h2></h2>
            <img src="" alt="" />
            <p class="beskrivelse"></p>
        </article>

    </main>





    <footer>

    </footer>



    <script>

        //Øverst her i dokumentet hentes alle URL-parametrene ud (vi har kun et), og ved hjælp af get(“id”) hente vores enlige parameter ud, der jo hedder id. 
        //Det sætter vi så lig med en const vi kalder id, og på den måde har vi fået overført parameteret fra url-strengen og over i en variabel vi kan bruge i vores script
        const urlParams = new URLSearchParams(window.location.search);
        const id = urlParams.get("id");

        
        const url = "https://tema7-64ef.restdb.io/rest/planter/";
        let plante;
        
        const myHeaders = {
            "x-apikey": "61fcfa4d3f215f310a37be8a"
        }
        console.log("ID", id);

        document.addEventListener("DOMContentLoaded", loadJSON);

        //første funktion kaldes efter loadsJSON
        async function loadJSON(){
            //lav eventlistener der fører tilbage til galleri med click. 
            document.querySelector(".tilbage").addEventListener("click", tilbageTilGalleri);
            //sæt id'et ind som vi har hentet fra url-parametrene ind i vores kald til restdb, og derved modtage kun én plante. 
            const JSONData = await fetch (url+id,{
                headers: myHeaders
                
            });

            plante = await JSONData.json();

            console.log(plante);
            visPlante();
        }

        //da vi kun får en plante, hentes den og overføre det content til vores html. Ikke noget med at loope.
        function visPlante(){
            document.querySelector("h2").textContent = plante.navn ;

            document.querySelector(".plante img").src = "billeder/" + plante.billede;
            document.querySelector(".beskrivelse").textContent = plante.beskrivelse;
        }

        //
        function tilbageTilGalleri (){
            history.back(); //brug history web API’et til at komme et hak baglæns i browserhistorien og dermed komme tilbage til planter.html
        };



    </script>
    
</body>
</html>